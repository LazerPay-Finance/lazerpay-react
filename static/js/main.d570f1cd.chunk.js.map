{"version":3,"sources":["../../src/script.ts","../../src/useLazerpay.ts","../../src/actions/lazerpay-actions.ts","App.tsx","index.tsx"],"names":["cachedScripts","options","src","useState","loaded","error","state","setState","useEffect","script","document","onScriptLoad","onScriptError","index","useScript","scriptLoaded","scriptError","publicKey","customerName","customerEmail","currency","businessLogo","amount","onError","onSuccess","onClose","console","LazerpayArgs","window","name","email","key","logo","callLazerpayPop","App","config","data","log","initializePayment","useLazerpay","onClick","ReactDOM","render","getElementById"],"mappings":"qIAEMA,EAAN,G,uBCI2CC,GACzC,M,WDEA,IAAMC,EAAN,sGAGA,EAA0BC,WAAwB,CAChDC,QADgD,EAEhDC,OAAO,IAFFC,EAAP,KAAcC,EAAd,KAiDA,OA5CAC,aAAU,WACR,IAAIR,WAAJ,GAKO,CACLA,UAEA,IAAMS,EAASC,uBAAf,UACAD,QACAA,WAEA,IAAME,EAAe,WACnBJ,EAAS,CACPH,QADO,EAEPC,OAAO,KAILO,EAAgB,WACpB,IAAMC,EAAQb,UAAd,GACIa,GAAJ,GAAgBb,cAChBS,WAEAF,EAAS,CACPH,QADO,EAEPC,OAAO,KAUX,OANAI,6BACAA,iCACAA,8BAEAC,6BAEO,WACLD,gCACAA,kCArCFF,EAAS,CACPH,QADO,EAEPC,OAAO,MAsCV,CA1CHG,IA4CO,CAACF,EAAD,OAAeA,EAAtB,OCtDoCQ,GAA7BC,EAAP,KAAqBC,EAArB,KAEEC,EASEhB,EAVJ,UAEEiB,EAQEjB,EAVJ,aAGEkB,EAOElB,EAVJ,cAIEmB,EAMEnB,EAVJ,SAKEoB,EAKEpB,EAVJ,aAMEqB,EAIErB,EAVJ,OAOEsB,EAGEtB,EAVJ,QAQEuB,EAEEvB,EAVJ,UASEwB,EACExB,EAVJ,QAwCA,OARAyB,8BAEAlB,aAAU,WACR,KACE,MAAM,UAAN,2CAED,CAJHA,IAtBA,WACE,KACE,MAAM,UAAN,yCAGF,GCzB2B,SAACmB,GAC9BD,qBAIEE,sBAEAA,OAAA,cAAqB,CACnBC,KAAMF,EADa,aAEnBG,MAAOH,EAFY,cAGnBL,OAAQK,EAHW,OAInBI,IAAKJ,EAJc,UAKnBK,KAAML,gBALa,GAMnBP,SAAUO,YANS,GAOnBF,QAASE,EAPU,UAQnBH,UAAWG,EARQ,YASnBJ,QAASI,cDqBTM,CAXqB,CACnBhB,UADmB,EAEnBC,aAFmB,EAGnBC,cAHmB,EAInBC,SAJmB,EAKnBC,aALmB,EAMnBC,OANmB,EAOnBC,QAPmB,EAQnBC,UARmB,EASnBC,e,2IEHOS,EA5BH,WACV,IAAMC,EAAS,CACblB,UAAW,6DACXC,aAAc,iBACdC,cAAe,yBACfC,SAAU,MACVE,OAAQ,IACRD,aACE,gFACFG,UAAW,SAACY,GACVV,QAAQW,IAAID,EAAM,iBAGpBb,QAAS,SAACa,GACRV,QAAQrB,MAAM+B,IAEhBX,QAAS,cAELa,EAAoBC,sBAAYJ,GAEtC,OACE,6BACE,mDACA,4BAAQK,QAASF,GAAjB,uBCrBNG,IAASC,OAAO,kBAAC,EAAD,MAAShC,SAASiC,eAAe,W","file":"static/js/main.d570f1cd.chunk.js","sourcesContent":["import { useState, useEffect } from 'react'\n\nconst cachedScripts: string[] = []\ninterface IScriptResult {\n  loaded: boolean\n  error: boolean\n}\n\nexport default function useLazerpayScript(): boolean[] {\n  const src =\n    'https://cdn.jsdelivr.net/gh/LazerPay-Finance/checkout-build@main/checkout%401.0.1/dist/index.min.js'\n\n  const [state, setState] = useState<IScriptResult>({\n    loaded: false,\n    error: false\n  })\n\n  useEffect((): any => {\n    if (cachedScripts.includes(src)) {\n      setState({\n        loaded: true,\n        error: false\n      })\n    } else {\n      cachedScripts.push(src)\n\n      const script = document.createElement('script')\n      script.src = src\n      script.async = true\n\n      const onScriptLoad = (): void => {\n        setState({\n          loaded: true,\n          error: false\n        })\n      }\n\n      const onScriptError = (): void => {\n        const index = cachedScripts.indexOf(src)\n        if (index >= 0) cachedScripts.splice(index, 1)\n        script.remove()\n\n        setState({\n          loaded: true,\n          error: true\n        })\n      }\n\n      script.addEventListener('load', onScriptLoad)\n      script.addEventListener('complete', onScriptLoad)\n      script.addEventListener('error', onScriptError)\n\n      document.body.appendChild(script)\n\n      return (): void => {\n        script.removeEventListener('load', onScriptLoad)\n        script.removeEventListener('error', onScriptError)\n      }\n    }\n  }, [src])\n\n  return [state.loaded, state.error]\n}\n","/* eslint-disable no-unused-vars */\nimport { useEffect } from 'react'\nimport { PaymentProps } from './@types/index'\nimport useScript from './script'\nimport { callLazerpayPop } from './actions/lazerpay-actions'\n\nexport default function usePaystackPayment(options: PaymentProps) {\n  const [scriptLoaded, scriptError] = useScript()\n  const {\n    publicKey,\n    customerName,\n    customerEmail,\n    currency,\n    businessLogo,\n    amount,\n    onError,\n    onSuccess,\n    onClose\n  } = options\n\n  function initializePayment(): void {\n    if (scriptError) {\n      throw new Error('Unable to load paystack inline script')\n    }\n\n    if (scriptLoaded) {\n      const LazerpayArgs = {\n        publicKey,\n        customerName,\n        customerEmail,\n        currency,\n        businessLogo,\n        amount,\n        onError,\n        onSuccess,\n        onClose\n      }\n      callLazerpayPop(LazerpayArgs)\n    }\n  }\n  console.log(scriptLoaded, 'scriptloaded')\n\n  useEffect(() => {\n    if (scriptError) {\n      throw new Error('Unable to load lazerpay inline script')\n    }\n  }, [scriptError])\n\n  return initializePayment\n}\n","export const callLazerpayPop = (LazerpayArgs: any): void => {\n  console.log(LazerpayArgs, 'arg')\n  // @ts-ignore\n  return (\n    // @ts-ignore\n    window.LazerCheckout &&\n    // @ts-ignore\n    window.LazerCheckout({\n      name: LazerpayArgs.customerName,\n      email: LazerpayArgs.customerEmail,\n      amount: LazerpayArgs.amount,\n      key: LazerpayArgs.publicKey,\n      logo: LazerpayArgs.businessLogo || '',\n      currency: LazerpayArgs.currency || '',\n      onClose: LazerpayArgs.onClose(),\n      onSuccess: LazerpayArgs.onSuccess(),\n      onError: LazerpayArgs.onError()\n    })\n  )\n}\n","import React from 'react'\n\nimport { useLazerpay } from './dist/index'\n\nconst App = () => {\n  const config = {\n    publicKey: 'pk_live_0N24k7lsrr7NGfrDQpIjPGy9z61LkXjUqxX3r99XblXHemwMht',\n    customerName: 'Njoku Emmanuel',\n    customerEmail: 'kalunjoku123@gmail.com',\n    currency: 'USD',\n    amount: '5',\n    businessLogo:\n      'https://pbs.twimg.com/profile_images/1463770588921618442/_jAzCZFA_400x400.jpg',\n    onSuccess: (data: any) => {\n      console.log(data, 'success data')\n    },\n\n    onError: (data: any) => {\n      console.error(data)\n    },\n    onClose: () => {}\n  }\n  const initializePayment = useLazerpay(config)\n\n  return (\n    <div>\n      <h1>Lazerpay React test</h1>\n      <button onClick={initializePayment}>Pay with Lazerpay</button>\n    </div>\n  )\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}